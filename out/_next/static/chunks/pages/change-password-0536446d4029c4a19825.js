(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[125],{28748:function(e,n,r){"use strict";var t=r(30266),a=r(809),s=r.n(a),c=r(67294),i=r(89862),o=r(24479),u=r(66800),l=r(65850),p=r(48193),d=r(78961),h=r(35005),x=r(43514),v=r(85893);n.Z=function(e){var n=(0,c.useState)(!1),r=n[0],a=n[1],f=function(){var n=(0,t.Z)(s().mark((function n(r,t){var c,i,o;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c=t.setFieldError,a(!0),n.prev=2,i=r.passphrase,o=r.confirm,i!==o){n.next=9;break}return n.next=7,e.callback(i,c);case 7:n.next=10;break;case 9:c("confirm",l.Z.PASSPHRASE_MATCH_ERROR);case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(2),c("confirm","".concat(l.Z.UNKNOWN_ERROR," ").concat(n.t0.message));case 15:return n.prev=15,a(!1),n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[2,12,15,18]])})));return function(e,r){return n.apply(this,arguments)}}();return(0,v.jsx)(i.ZP,{children:(0,v.jsx)(o.Z,{style:{maxWidth:"540px",padding:"20px"},children:(0,v.jsxs)(o.Z.Body,{children:[(0,v.jsxs)("div",{className:"text-center",style:{marginBottom:"40px"},children:[(0,v.jsx)("p",{children:l.Z.ENTER_ENC_PASSPHRASE}),l.Z.PASSPHRASE_DISCLAIMER()]}),(0,v.jsx)(p.J9,{initialValues:{passphrase:"",confirm:""},validationSchema:d.Ry().shape({passphrase:d.Z_().required(l.Z.REQUIRED),confirm:d.Z_().required(l.Z.REQUIRED)}),validateOnChange:!1,validateOnBlur:!1,onSubmit:f,children:function(n){var t=n.values,a=n.touched,s=n.errors,c=n.handleChange,i=n.handleSubmit;return(0,v.jsxs)(u.Z,{noValidate:!0,onSubmit:i,children:[(0,v.jsxs)(u.Z.Group,{children:[(0,v.jsx)(u.Z.Control,{type:"password",placeholder:l.Z.PASSPHRASE_HINT,value:t.passphrase,onChange:c("passphrase"),isInvalid:Boolean(a.passphrase&&s.passphrase),autoFocus:!0,disabled:r}),(0,v.jsx)(u.Z.Control.Feedback,{type:"invalid",children:s.passphrase})]}),(0,v.jsxs)(u.Z.Group,{children:[(0,v.jsx)(u.Z.Control,{type:"password",placeholder:l.Z.RE_ENTER_PASSPHRASE,value:t.confirm,onChange:c("confirm"),isInvalid:Boolean(a.confirm&&s.confirm),disabled:r}),(0,v.jsx)(u.Z.Control.Feedback,{type:"invalid",children:s.confirm})]}),(0,v.jsx)(x.Z,{buttonText:e.buttonText,loading:r})]})}}),e.back&&(0,v.jsx)("div",{className:"text-center",style:{marginTop:"20px"},children:(0,v.jsx)(h.Z,{variant:"link",onClick:e.back,children:l.Z.GO_BACK})})]})})})}},12939:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return _}});var t=r(30266),a=r(809),s=r.n(a),c=r(67294),i=r(65850),o=r(35641),u=r(11163),l=r(8635),p=r(68487),d=r(63255),h=r(28748),x=r(24118),v=r(15289),f=r(76640),E=r(85893);function _(){var e,n=(0,c.useState)(),r=n[0],a=n[1],_=(0,u.useRouter)(),m=(0,c.useContext)(x.AppContext);(0,c.useEffect)((function(){var e=(0,o.Yu)(o.Pd.USER);null!==e&&void 0!==e&&e.token?a(e.token):_.push(f.q5.ROOT),m.showNavBar(!0)}),[]);var S=function(){var e=(0,t.Z)(s().mark((function e(n,t){var a,c,u,h,x,f,E,_;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new l.ZP;case 2:return a=e.sent,e.next=5,(0,p.GW)();case 5:return c=e.sent,u=(0,o.Yu)(o.Pd.KEY_ATTRIBUTES),e.next=9,a.generateSaltToDeriveKey();case 9:return h=e.sent,e.prev=10,e.next=13,a.deriveSensitiveKey(n,h);case 13:x=e.sent,e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(10),t("confirm",i.Z.PASSWORD_GENERATION_FAILED),e.abrupt("return");case 20:return e.next=22,a.encryptToB64(c,x.key);case 22:return f=e.sent,E={kekSalt:h,encryptedKey:f.encryptedData,keyDecryptionNonce:f.nonce,opsLimit:x.opsLimit,memLimit:x.memLimit},e.next=26,(0,d.wo)(r,E);case 26:return _=Object.assign(u,E),e.next=29,(0,l.iv)(n,_,c);case 29:return e.next=31,(0,l.K_)(v.Qm.ENCRYPTION_KEY,c);case 31:Z();case 32:case"end":return e.stop()}}),e,null,[[10,16]])})));return function(n,r){return e.apply(this,arguments)}}(),Z=function(){(0,o.a_)(o.Pd.SHOW_BACK_BUTTON,{value:!0}),_.push(f.q5.GALLERY)};return(0,E.jsx)(h.Z,{callback:S,buttonText:i.Z.CHANGE_PASSWORD,back:null!==(e=(0,o.Yu)(o.Pd.SHOW_BACK_BUTTON))&&void 0!==e&&e.value?Z:null})}},41653:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/change-password",function(){return r(12939)}])}},function(e){e.O(0,[446,279,774,888,179],(function(){return n=41653,e(e.s=n);var n}));var n=e.O();_N_E=n}]);
//# sourceMappingURL=change-password-0536446d4029c4a19825.js.map