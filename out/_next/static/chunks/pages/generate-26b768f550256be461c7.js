(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[343],{28748:function(e,n,r){"use strict";var t=r(30266),a=r(809),s=r.n(a),c=r(67294),i=r(89862),o=r(24479),u=r(66800),l=r(65850),p=r(48193),d=r(78961),h=r(35005),f=r(43514),x=r(85893);n.Z=function(e){var n=(0,c.useState)(!1),r=n[0],a=n[1],E=function(){var n=(0,t.Z)(s().mark((function n(r,t){var c,i,o;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c=t.setFieldError,a(!0),n.prev=2,i=r.passphrase,o=r.confirm,i!==o){n.next=9;break}return n.next=7,e.callback(i,c);case 7:n.next=10;break;case 9:c("confirm",l.Z.PASSPHRASE_MATCH_ERROR);case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(2),c("confirm","".concat(l.Z.UNKNOWN_ERROR," ").concat(n.t0.message));case 15:return n.prev=15,a(!1),n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[2,12,15,18]])})));return function(e,r){return n.apply(this,arguments)}}();return(0,x.jsx)(i.ZP,{children:(0,x.jsx)(o.Z,{style:{maxWidth:"540px",padding:"20px"},children:(0,x.jsxs)(o.Z.Body,{children:[(0,x.jsxs)("div",{className:"text-center",style:{marginBottom:"40px"},children:[(0,x.jsx)("p",{children:l.Z.ENTER_ENC_PASSPHRASE}),l.Z.PASSPHRASE_DISCLAIMER()]}),(0,x.jsx)(p.J9,{initialValues:{passphrase:"",confirm:""},validationSchema:d.Ry().shape({passphrase:d.Z_().required(l.Z.REQUIRED),confirm:d.Z_().required(l.Z.REQUIRED)}),validateOnChange:!1,validateOnBlur:!1,onSubmit:E,children:function(n){var t=n.values,a=n.touched,s=n.errors,c=n.handleChange,i=n.handleSubmit;return(0,x.jsxs)(u.Z,{noValidate:!0,onSubmit:i,children:[(0,x.jsxs)(u.Z.Group,{children:[(0,x.jsx)(u.Z.Control,{type:"password",placeholder:l.Z.PASSPHRASE_HINT,value:t.passphrase,onChange:c("passphrase"),isInvalid:Boolean(a.passphrase&&s.passphrase),autoFocus:!0,disabled:r}),(0,x.jsx)(u.Z.Control.Feedback,{type:"invalid",children:s.passphrase})]}),(0,x.jsxs)(u.Z.Group,{children:[(0,x.jsx)(u.Z.Control,{type:"password",placeholder:l.Z.RE_ENTER_PASSPHRASE,value:t.confirm,onChange:c("confirm"),isInvalid:Boolean(a.confirm&&s.confirm),disabled:r}),(0,x.jsx)(u.Z.Control.Feedback,{type:"invalid",children:s.confirm})]}),(0,x.jsx)(f.Z,{buttonText:e.buttonText,loading:r})]})}}),e.back&&(0,x.jsx)("div",{className:"text-center",style:{marginTop:"20px"},children:(0,x.jsx)(h.Z,{variant:"link",onClick:e.back,children:l.Z.GO_BACK})})]})})})}},57296:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return m}});var t=r(30266),a=r(809),s=r.n(a),c=r(67294),i=r(65850),o=r(63255),u=r(35641),l=r(11163),p=r(15289),d=r(8635),h=r(28748),f=r(66091),x=r(61975),E=r(76640),v=r(89862),R=r(39151),S=r(24118),Z=r(5567),_=r(85893);function m(){var e=(0,c.useState)(),n=e[0],r=e[1],a=(0,l.useRouter)(),m=(0,c.useState)(!1),A=m[0],N=m[1],k=(0,c.useState)(!0),b=k[0],j=k[1],P=(0,c.useContext)(S.AppContext);(0,c.useEffect)((function(){(function(){var e=(0,t.Z)(s().mark((function e(){var n,t,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,p.km)(p.Qm.ENCRYPTION_KEY),t=(0,u.Yu)(u.Pd.ORIGINAL_KEY_ATTRIBUTES),a.prefetch(E.q5.GALLERY),a.prefetch(E.q5.CREDENTIALS),null!==(c=(0,u.Yu)(u.Pd.USER))&&void 0!==c&&c.token?n?(0,f.fo)()?(N(!0),j(!1)):a.push(E.q5.GALLERY):null!==t&&void 0!==t&&t.encryptedKey?a.push(E.q5.CREDENTIALS):(r(c.token),j(!1)):a.push(E.q5.ROOT);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),P.showNavBar(!0)}),[]);var C=function(){var e=(0,t.Z)(s().mark((function e(r,t){var a,c,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.dR)(r);case 3:return a=e.sent,c=a.keyAttributes,u=a.masterKey,e.next=8,(0,o.p6)(n,c);case 8:return e.next=10,(0,d.iv)(r,c,u);case 10:return e.next=12,(0,d.K_)(p.Qm.ENCRYPTION_KEY,u);case 12:(0,f.n_)(!0),N(!0),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),(0,Z.H)(e.t0,"failed to generate password"),t("passphrase",i.Z.PASSWORD_GENERATION_FAILED);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(n,r){return e.apply(this,arguments)}}();return(0,_.jsx)(_.Fragment,{children:b?(0,_.jsx)(v.ZP,{children:(0,_.jsx)(R.Z,{children:(0,_.jsx)("span",{className:"sr-only",children:"Loading..."})})}):A?(0,_.jsx)(x.ZP,{show:A,onHide:function(){N(!1),a.push(E.q5.GALLERY)},somethingWentWrong:function(){return null}}):(0,_.jsx)(h.Z,{callback:C,buttonText:i.Z.SET_PASSPHRASE,back:o.TX})})}},49653:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/generate",function(){return r(57296)}])}},function(e){e.O(0,[446,714,114,153,489,279,733,774,888,179],(function(){return n=49653,e(e.s=n);var n}));var n=e.O();_N_E=n}]);
//# sourceMappingURL=generate-26b768f550256be461c7.js.map