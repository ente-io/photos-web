(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[749],{452:function(e,t,n){"use strict";var r=n(91288);t.Z=r.ZP.img.withConfig({displayName:"LogoImg",componentId:"sc-1whqfa-0"})(["height:25px;vertical-align:bottom;padding-right:15px;border-right:2px solid #aaa;margin-right:15px;"])},91441:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(30266),i=n(809),s=n.n(i),a=n(67294),o=n(65850),c=n(66800),u=n(48193),l=n(78961),d=n(43514),p=n(91288),h=n(85893);function x(e){return(0,h.jsx)("div",{children:(0,h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:e.height,viewBox:e.viewBox,width:e.width,fill:"#000000",children:[(0,h.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,h.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})]})})}function v(e){return(0,h.jsx)("div",{children:(0,h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:e.height,viewBox:e.viewBox,width:e.width,fill:"#000000",children:[(0,h.jsx)("path",{d:"M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z",fill:"none"}),(0,h.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"})]})})}x.defaultProps={height:24,width:24,viewBox:"0 0 24 24",open:!1},v.defaultProps={height:24,width:24,viewBox:"0 0 24 24",open:!1};var f=p.ZP.div.withConfig({displayName:"SingleInputForm__Group",componentId:"sc-bpre9q-0"})(["position:relative;"]),m=p.ZP.button.withConfig({displayName:"SingleInputForm__Button",componentId:"sc-bpre9q-1"})(["background:transparent;border:none;width:46px;height:34px;position:absolute;top:1px;right:1px;border-radius:5px;align-items:center;"]);function g(e){var t=(0,a.useState)(!1),n=t[0],i=t[1],p=(0,a.useState)(!1),g=p[0],w=p[1],_=function(){var t=(0,r.Z)(s().mark((function t(n,r){var a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.setFieldError,i(!0),t.next=4,e.callback(n.passphrase,a);case 4:i(!1);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return(0,h.jsx)(u.J9,{initialValues:{passphrase:""},onSubmit:_,validationSchema:l.Ry().shape({passphrase:l.Z_().required(o.Z.REQUIRED)}),validateOnChange:!1,validateOnBlur:!1,children:function(t){var r=t.values,i=t.touched,s=t.errors,a=t.handleChange,o=t.handleSubmit;return(0,h.jsxs)(c.Z,{noValidate:!0,onSubmit:o,children:[(0,h.jsx)(c.Z.Group,{children:(0,h.jsxs)(f,{children:[(0,h.jsx)(c.Z.Control,{type:g?"text":e.fieldType,placeholder:e.placeholder,value:r.passphrase,onChange:a("passphrase"),isInvalid:Boolean(i.passphrase&&s.passphrase),disabled:n,autoFocus:!0}),"password"===e.fieldType&&(0,h.jsx)(m,{type:"button",onClick:function(){return w(!g)},children:g?(0,h.jsx)(v,{}):(0,h.jsx)(x,{})}),(0,h.jsx)(c.Z.Control.Feedback,{type:"invalid",children:s.passphrase})]})}),(0,h.jsx)(d.Z,{buttonText:e.buttonText,loading:n}),(0,h.jsx)("br",{})]})}})}},41576:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return R}});var r=n(30266),i=n(809),s=n.n(i),a=n(67294),o=n(65850),c=n(35641),u=n(11163),l=n(76640),d=n(15289),p=n(8635),h=n(63255),x=n(66091),v=n(91441),f=n(89862),m=n(24479),g=n(35005),w=n(24118),_=n(452),E=n(5567),S=n(85893);function R(){var e=(0,u.useRouter)(),t=(0,a.useState)(),n=t[0],i=t[1],R=(0,a.useContext)(w.AppContext);(0,a.useEffect)((function(){e.prefetch(l.q5.GALLERY);var t=(0,c.Yu)(c.Pd.USER),n=(0,c.Yu)(c.Pd.KEY_ATTRIBUTES),r=(0,d.km)(d.Qm.ENCRYPTION_KEY);!(null!==t&&void 0!==t&&t.token||null!==t&&void 0!==t&&t.encryptedToken)||n&&!n.memLimit?((0,c.Nk)(),e.push(l.q5.ROOT)):n?r?e.push(l.q5.GALLERY):i(n):e.push(l.q5.GENERATE),R.showNavBar(!1)}),[]);var j=function(){var t=(0,r.Z)(s().mark((function t(r,i){var a,c,u,h;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,new p.ZP;case 3:return a=t.sent,c=null,t.prev=5,t.next=8,a.deriveKey(r,n.kekSalt,n.opsLimit,n.memLimit);case 8:c=t.sent,t.next=15;break;case 11:throw t.prev=11,t.t0=t.catch(5),(0,E.H)(t.t0,"failed to derive key"),t.t0;case 15:return t.prev=15,t.next=18,a.decryptB64(n.encryptedKey,n.keyDecryptionNonce,c);case 18:if(u=t.sent,!(0,x.aF)()){t.next=22;break}return t.next=22,(0,p.iv)(r,n,u);case 22:return t.next=24,(0,p.K_)(d.Qm.ENCRYPTION_KEY,u);case 24:return t.next=26,(0,p.PN)(u);case 26:h=R.redirectUrl,R.setRedirectUrl(null),e.push(null!==h&&void 0!==h?h:l.q5.GALLERY),t.next=35;break;case 31:t.prev=31,t.t1=t.catch(15),(0,E.H)(t.t1,"user entered a wrong password"),i("passphrase",o.Z.INCORRECT_PASSPHRASE);case 35:t.next=40;break;case 37:t.prev=37,t.t2=t.catch(0),i("passphrase","".concat(o.Z.UNKNOWN_ERROR," ").concat(t.t2.message));case 40:case"end":return t.stop()}}),t,null,[[0,37],[5,11],[15,31]])})));return function(e,n){return t.apply(this,arguments)}}();return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(f.ZP,{children:(0,S.jsx)(m.Z,{style:{minWidth:"320px"},className:"text-center",children:(0,S.jsxs)(m.Z.Body,{style:{padding:"40px 30px"},children:[(0,S.jsxs)(m.Z.Title,{style:{marginBottom:"32px"},children:[(0,S.jsx)(_.Z,{src:"/icon.svg"}),o.Z.PASSWORD]}),(0,S.jsx)(v.Z,{callback:j,placeholder:o.Z.RETURN_PASSPHRASE_HINT,buttonText:o.Z.VERIFY_PASSPHRASE,fieldType:"password"}),(0,S.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginTop:"12px"},children:[(0,S.jsx)(g.Z,{variant:"link",onClick:function(){return e.push(l.q5.RECOVER)},children:o.Z.FORGOT_PASSWORD}),(0,S.jsx)(g.Z,{variant:"link",onClick:h.TX,children:o.Z.GO_BACK})]})]})})})})}},66091:function(e,t,n){"use strict";n.d(t,{aF:function(){return i},Qj:function(){return s},fo:function(){return a},n_:function(){return o}});var r=n(35641),i=function(){var e,t;return null!==(e=null===(t=(0,r.Yu)(r.Pd.IS_FIRST_LOGIN))||void 0===t?void 0:t.status)&&void 0!==e&&e};function s(e){(0,r.a_)(r.Pd.IS_FIRST_LOGIN,{status:e})}var a=function(){var e,t;return null!==(e=null===(t=(0,r.Yu)(r.Pd.JUST_SIGNED_UP))||void 0===t?void 0:t.status)&&void 0!==e&&e};function o(e){(0,r.a_)(r.Pd.JUST_SIGNED_UP,{status:e})}},52619:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/credentials",function(){return n(41576)}])}},function(e){e.O(0,[446,279,774,888,179],(function(){return t=52619,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=credentials-848d1549ac6c5a4e6a4a.js.map