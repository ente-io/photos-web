(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[740],{452:function(e,t,n){"use strict";var r=n(91288);t.Z=r.ZP.img.withConfig({displayName:"LogoImg",componentId:"sc-1whqfa-0"})(["height:25px;vertical-align:bottom;padding-right:15px;border-right:2px solid #aaa;margin-right:15px;"])},94785:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(92809),o=n(10219),i=(n(67294),n(33114)),s=n(35005),c=n(65850),a=n(85893),l=["attributes","children"];function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e){var t,n,r,p,d,h,f=e.attributes,x=e.children,v=(0,o.Z)(e,l);return f?(0,a.jsxs)(i.Z,u(u({},v),{},{onHide:f.nonClosable?function(){return null}:v.onHide,centered:!0,backdrop:!f.staticBackdrop||"static",children:[(0,a.jsx)(i.Z.Header,{style:{borderBottom:"none"},closeButton:!f.nonClosable,children:f.title&&(0,a.jsx)(i.Z.Title,{children:f.title})}),(x||(null===f||void 0===f?void 0:f.content))&&(0,a.jsx)(i.Z.Body,{style:{borderTop:"1px solid #444"},children:x||(0,a.jsx)("p",{style:{fontSize:"1.25rem",marginBottom:0},children:f.content})}),(f.close||f.proceed)&&(0,a.jsx)(i.Z.Footer,{style:{borderTop:"none"},children:(0,a.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[f.close&&(0,a.jsx)(s.Z,{variant:"outline-".concat(null!==(t=null===(n=f.close)||void 0===n?void 0:n.variant)&&void 0!==t?t:"secondary"),onClick:function(){var e;f.close.action&&(null===(e=f.close)||void 0===e||e.action()),v.onHide()},style:{padding:"6px 3em",margin:"0 20px",marginBottom:"20px",flex:1,whiteSpace:"nowrap"},children:null!==(r=null===(p=f.close)||void 0===p?void 0:p.text)&&void 0!==r?r:c.Z.OK}),f.proceed&&(0,a.jsx)(s.Z,{variant:"outline-".concat(null!==(d=null===(h=f.proceed)||void 0===h?void 0:h.variant)&&void 0!==d?d:"primary"),onClick:function(){f.proceed.action(),v.onHide()},style:{padding:"6px 3em",margin:"0 20px",marginBottom:"20px",flex:1,whiteSpace:"nowrap"},disabled:f.proceed.disabled,children:f.proceed.text})]})})]})):(0,a.jsx)(i.Z,{})}},91441:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(30266),o=n(809),i=n.n(o),s=n(67294),c=n(65850),a=n(66800),l=n(48193),p=n(78961),u=n(43514),d=n(91288),h=n(85893);function f(e){return(0,h.jsx)("div",{children:(0,h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:e.height,viewBox:e.viewBox,width:e.width,fill:"#000000",children:[(0,h.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,h.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})]})})}function x(e){return(0,h.jsx)("div",{children:(0,h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:e.height,viewBox:e.viewBox,width:e.width,fill:"#000000",children:[(0,h.jsx)("path",{d:"M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z",fill:"none"}),(0,h.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"})]})})}f.defaultProps={height:24,width:24,viewBox:"0 0 24 24",open:!1},x.defaultProps={height:24,width:24,viewBox:"0 0 24 24",open:!1};var v=d.ZP.div.withConfig({displayName:"SingleInputForm__Group",componentId:"sc-bpre9q-0"})(["position:relative;"]),b=d.ZP.button.withConfig({displayName:"SingleInputForm__Button",componentId:"sc-bpre9q-1"})(["background:transparent;border:none;width:46px;height:34px;position:absolute;top:1px;right:1px;border-radius:5px;align-items:center;"]);function g(e){var t=(0,s.useState)(!1),n=t[0],o=t[1],d=(0,s.useState)(!1),g=d[0],w=d[1],y=function(){var t=(0,r.Z)(i().mark((function t(n,r){var s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=r.setFieldError,o(!0),t.next=4,e.callback(n.passphrase,s);case 4:o(!1);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return(0,h.jsx)(l.J9,{initialValues:{passphrase:""},onSubmit:y,validationSchema:p.Ry().shape({passphrase:p.Z_().required(c.Z.REQUIRED)}),validateOnChange:!1,validateOnBlur:!1,children:function(t){var r=t.values,o=t.touched,i=t.errors,s=t.handleChange,c=t.handleSubmit;return(0,h.jsxs)(a.Z,{noValidate:!0,onSubmit:c,children:[(0,h.jsx)(a.Z.Group,{children:(0,h.jsxs)(v,{children:[(0,h.jsx)(a.Z.Control,{type:g?"text":e.fieldType,placeholder:e.placeholder,value:r.passphrase,onChange:s("passphrase"),isInvalid:Boolean(o.passphrase&&i.passphrase),disabled:n,autoFocus:!0}),"password"===e.fieldType&&(0,h.jsx)(b,{type:"button",onClick:function(){return w(!g)},children:g?(0,h.jsx)(x,{}):(0,h.jsx)(f,{})}),(0,h.jsx)(a.Z.Control.Feedback,{type:"invalid",children:i.passphrase})]})}),(0,h.jsx)(u.Z,{buttonText:e.buttonText,loading:n}),(0,h.jsx)("br",{})]})}})}},8565:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var r=n(92809),o=n(30266),i=n(809),s=n.n(i),c=n(67294),a=n(65850),l=n(35641),p=n(11163),u=n(8635),d=n(91441),h=n(94785),f=n(89862),x=n(24479),v=n(35005),b=n(452),g=n(5567),w=n(63255),y=n(24118),j=n(76640),O=n(85893);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z=n(2153);function _(){var e=(0,p.useRouter)(),t=(0,c.useState)(!1),n=t[0],r=t[1],i=(0,c.useState)(null),m=i[0],_=i[1],C=(0,c.useState)(null),T=C[0],S=C[1],k=(0,c.useContext)(y.AppContext);(0,c.useEffect)((function(){e.prefetch(j.q5.GALLERY);var t=(0,l.Yu)(l.Pd.USER);t.isTwoFactorEnabled||!t.encryptedToken&&!t.token?t.email&&t.twoFactorSessionID?S(t.twoFactorSessionID):e.push(j.q5.ROOT):e.push(j.q5.GENERATE),function(){var e=(0,o.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.fG)(t.twoFactorSessionID);case 2:n=e.sent,_({encryptedData:n.encryptedSecret,nonce:n.secretDecryptionNonce,key:null});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]);var P=function(){var t=(0,o.Z)(s().mark((function t(n,r){var o,i,c,p,d,h,f;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(n.trim().indexOf(" ")>0)){t.next=5;break}if(24===n.trim().split(" ").length){t.next=4;break}throw new Error("recovery code should have 24 words");case 4:n=Z.mnemonicToEntropy(n);case 5:return t.next=7,new u.ZP;case 7:return o=t.sent,t.t0=o,t.t1=m.encryptedData,t.t2=m.nonce,t.next=13,o.fromHex(n);case 13:return t.t3=t.sent,t.next=16,t.t0.decryptB64.call(t.t0,t.t1,t.t2,t.t3);case 16:return i=t.sent,t.next=19,(0,w.Jr)(T,i);case 19:c=t.sent,p=c.keyAttributes,d=c.encryptedToken,h=c.token,f=c.id,(0,l.a_)(l.Pd.USER,E(E({},(0,l.Yu)(l.Pd.USER)),{},{token:h,encryptedToken:d,id:f,isTwoFactorEnabled:!1})),(0,l.a_)(l.Pd.KEY_ATTRIBUTES,p),k.setDisappearingFlashMessage({message:a.Z.TWO_FACTOR_DISABLE_SUCCESS,type:y.FLASH_MESSAGE_TYPE.INFO}),e.push(j.q5.CREDENTIALS),t.next=31;break;case 27:t.prev=27,t.t4=t.catch(0),(0,g.H)(t.t4,"two factor recovery failed"),r("passphrase",a.Z.INCORRECT_RECOVERY_KEY);case 31:case"end":return t.stop()}}),t,null,[[0,27]])})));return function(e,n){return t.apply(this,arguments)}}();return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(f.ZP,{children:(0,O.jsx)(x.Z,{style:{minWidth:"320px"},className:"text-center",children:(0,O.jsxs)(x.Z.Body,{style:{padding:"40px 30px"},children:[(0,O.jsxs)(x.Z.Title,{style:{marginBottom:"32px"},children:[(0,O.jsx)(b.Z,{src:"/icon.svg"}),a.Z.RECOVER_TWO_FACTOR]}),(0,O.jsx)(d.Z,{callback:P,fieldType:"text",placeholder:a.Z.RETURN_RECOVERY_KEY_HINT,buttonText:a.Z.RECOVER}),(0,O.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginTop:"12px"},children:[(0,O.jsx)(v.Z,{variant:"link",onClick:function(){return r(!0)},children:a.Z.NO_RECOVERY_KEY}),(0,O.jsx)(v.Z,{variant:"link",onClick:e.back,children:a.Z.GO_BACK})]})]})})}),(0,O.jsx)(h.Z,{size:"lg",show:n,onHide:function(){return r(!1)},attributes:{title:a.Z.CONTACT_SUPPORT,close:{},content:a.Z.NO_TWO_FACTOR_RECOVERY_KEY_MESSAGE()}})]})}Z.setDefaultWordlist("english")},12822:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/two-factor/recover",function(){return n(8565)}])},69386:function(){},31616:function(){},69862:function(){},40964:function(){}},function(e){e.O(0,[446,714,114,153,279,774,888,179],(function(){return t=12822,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=recover-0c3921e1cd96509ed262.js.map